<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>webrtc-live-system</title>
<link rel="stylesheet" href="layui/css/layui.css">
<!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css">-->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>-->
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
<script src="bootstrap/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<div class="">
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="/">LIVE SYSTEM</a>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" id="user_signin">未登录</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="/signin">sign in</a></li>
              <li><a class="dropdown-item" href="/profile">profile</a></li>
              <li><a class="dropdown-item" href="/api/signout" id="signout_a">sign out</a></li>              
            </ul>
          </li>
        </div>
      </nav>
    <!-- 内容主体区域 -->
    <div class="content" style="padding-top: 3%; padding-right:20%; padding-left:20%;">
        <h1>webrtc publish</h1>
        <div class="AllContainer">
            <div class="OwnerContainer">
                <div class="AllContainer" id="OwnerHeader">
                    <div>
                        <div>
                            <label>server:</label> <input class="form-control" id='server'
                                                          type='text' size=20
                                                          value="192.168.3.148:8000"/>
                            <label>roomid:</label> <input class="form-control" id='roomId' type='text' size=10 />
                            <label>userid:</label> <input class="form-control" id='userId' type='text' size=10 />
                        </div>
                        <br>
                        <div>
                            <button id="opencamera" type="button" class="btn btn-primary">open camera</button>
                            <button id="openscreen" type="button" class="btn btn-primary">open screen</button>
                            <button id="join" type="button" class="btn btn-primary">join</button>
                            <button id="publish" type="button" class="btn btn-primary">publish</button>
                            <button id="unpublish" type="button" class="btn btn-primary">unpublish</button>
                            <br>
                        </div>
                        <div id="medialive">
                            publish preview:
                            <div id="container">
                                <video id="video_container_publish" playsinline
                                       controls autoplay muted width="720"
                                                               height="480">
                                </video>
                            </div>
                        </div>
                    </div>
                    <!--<div class="StatsContainer" id="stats">
                        <div class="StatsItemContainer">
                            <label class="TextStyle">Video Width:</label> <input id='videoWidth' type='text' size=10 class="TextStyle"/>
                            <label class="TextStyle">Video Heigth:</label> <input id='videoHeight' type='text' size=10 class="TextStyle"/>
                        </div>
                        <div class="StatsItemContainer">
                            <label class="TextStyle">Video Fps:</label> <input id='videoFps' type='text' size=10 class="TextStyle"/>
                            <label class="TextStyle">Video Bps(kbps):</label> <input id='videoBps' type='text' size=10 class="TextStyle"/>
                        </div>
                        <div class="StatsItemContainer">
                            <label class="TextStyle">Audio Fps:</label> <input id='audioFps' type='text' size=10 class="TextStyle"/>
                            <label class="TextStyle">Audio Bps(kbps):</label> <input id='audioBps' type='text' size=10 class="TextStyle" />
                        </div>
                        <div class="StatsItemContainer">
                            <label class="TextStyle">Rtt(ms):</label> <input id='Rtt' type='text' size=10 class="TextStyle"/>
                        </div>
                    </div>-->
                </div>
                <div class="logArea">
                    <label>event log:</label>
                    <textarea class="form-control" id="logTextArea" style="text-align: left; margin-bottom: 10px; resize: none;height: 300px;width: 50%;"></textarea>
                </div>
            </div>
        </div>
    </div>    
</div>

<script src="./layui/layui.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="js/room_utils.js"></script>
<script src="js/room_utils.js"></script>
<script src="js/publish_webrtc_compiled.js"></script>
<script>
    layui.use(['form', 'jquery'], function(){
      layui.$('#signout_a').click(function(event){
        document.cookie="user_name=未登录";
      })           
    })

    document.getElementById('user_signin').innerHTML = getCookie('user_name');


    document.getElementById('server').value = window.location.host.split(':')[0] + ':8000';
    document.getElementById('roomId').value = getUrlParam('room_id');
    document.getElementById('userId').value = getUrlParam('user_id');
    
</script>
</body>
</html>
